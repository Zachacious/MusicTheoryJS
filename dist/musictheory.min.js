!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((t="undefined"!=typeof globalThis?globalThis:t||self).MusicTheory={})}(this,function(t){"use strict";var o=function(){return(o=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++)for(var r in o=arguments[e])Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);return t}).apply(this,arguments)};for(var e,r=function(t,o,e){var n=o,r=e;e<o&&(n=e,r=o);var i=t,e=0-n;n+=e,r+=e,i+=e;o=Math.trunc(i/r),t=-1<=(o=0===o&&i<n?-1:o)&&o<=1?1:0;return i<n?i=r+(i%r+t):r<i&&(i=n+(i%r-t)),{value:i-=e,numWraps:o}},n=256,i=[],p=256;n--;)i[n]=(n+256).toString(16).substring(1);var c,u,a=function(){return function(o){o.prototype.id=function(t){return void 0===o.prototype._id&&(o.prototype._id=function(t){var o=0,t=t||11;if(!e||2*p<n+t)for(e="",n=0;o<p;o++)e+=i[256*Math.random()|0];return e.substring(n,n+++t)}()),t&&(o.prototype._id=t),o.prototype._id}}},f=function(){return function(n){n.prototype.octave=function(t){var o,e;return void 0===n.prototype._octave&&(n.prototype._octave=4),void 0!==t&&(n.prototype._octave=(o=0,e=9,Math.max(Math.min(t,Math.max(o,e)),Math.min(o,e)))),n.prototype._octave}}};(u=c=c||{})[u.A=9]="A",u[u.As=10]="As",u[u.Bb=10]="Bb",u[u.B=11]="B",u[u.Bs=0]="Bs",u[u.Cb=11]="Cb",u[u.C=0]="C",u[u.Cs=1]="Cs",u[u.Db=1]="Db",u[u.D=2]="D",u[u.Ds=3]="Ds",u[u.Eb=3]="Eb",u[u.E=4]="E",u[u.Es=5]="Es",u[u.Fb=4]="Fb",u[u.F=5]="F",u[u.Fs=6]="Fs",u[u.Gb=6]="Gb",u[u.G=7]="G",u[u.Gs=8]="Gs",u[u.Ab=8]="Ab";var s=c,y={a4:440},v=function(t){return y=t?o(o({},y),t):y},d={},l={},h=12,b=12;!function(){for(var t=0,o=0,t=0;t<12;++t)for(o=0;o<b;++o){var e="".concat(t,"-").concat(o),n=h+t*b+o,r=Math.pow(2,(n-69)/12)*v().a4;l[e]=n,d[e]=r}}(),console.log("lookup",d);var w=[1,3,4,6,8,10],A=[1,3,4,6,8,10],a=(_.prototype.id=function(t){return""},_.prototype.octave=function(t){return 0},_.prototype.tone=function(t){return s.C},_.prototype.midiKey=function(){return function(t,o){t="".concat(t,"-").concat(o),o=l[t];if(void 0===o)throw new Error("Invalid midi key: ".concat(t));return o}(this.octave(),this.tone())},_.prototype.frequency=function(){return function(t,o){t="".concat(t,"-").concat(o),o=d[t];if(void 0===o)throw new Error("Invalid frequency key: ".concat(t));return o}(this.octave(),this.tone())},function(t,o,e,n){var r,i=arguments.length,p=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(t,o,e,n);else for(var c=t.length-1;0<=c;c--)(r=t[c])&&(p=(i<3?r(p):3<i?r(o,e,p):r(o,e))||p);return 3<i&&p&&Object.defineProperty(o,e,p),p}([a(),function(e){e.prototype.sharpen=function(){if(!e.prototype.tone)throw new Error("Tone doesn't exist on the object");var t=e.prototype.tone,o=t();t(o+1)},e.prototype.isSharp=function(){if(!e.prototype.tone)throw new Error("Tone doesn't exist on the object");var t=e.prototype.tone();return w.includes(t)}},function(e){e.prototype.flatten=function(){if(!e.prototype.tone)throw new Error("Tone doesn't exist on the object");var t=e.prototype.tone,o=t();t(o-1)},e.prototype.isFlat=function(){if(!e.prototype.tone)throw new Error("Tone doesn't exist on the object");var t=e.prototype.tone();return A.includes(t)}},f(),function(n){n.prototype.tone=function(t){var o,e;return void 0===n.prototype._tone&&(n.prototype._tone=4),void 0!==t&&(o=r(t,0,11),n.prototype._tone=o.value,void 0!==(e=n.prototype.octave)&&(t=e(),e(t+o.numWraps))),n.prototype._tone}}],_));function _(t){var o;this.octave(null!==(o=null==t?void 0:t.octave)&&void 0!==o?o:4),this.tone(null!==(t=null==t?void 0:t.tone)&&void 0!==t?t:4)}(f=m=m||{})[f.NATURAL=0]="NATURAL",f[f.SHARP=1]="SHARP",f[f.FLAT=2]="FLAT";var m=m;t.Modifier=m,t.Note=a,t.Semitone=s,t.wrap=r,Object.defineProperty(t,"__esModule",{value:!0})});
