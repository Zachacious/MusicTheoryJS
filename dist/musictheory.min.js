!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((t="undefined"!=typeof globalThis?globalThis:t||self).MusicTheory={})}(this,function(t){"use strict";var o=function(){return(o=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++)for(var r in o=arguments[e])Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);return t}).apply(this,arguments)};for(var e,r=function(t,o,e){var n=Math.trunc(Math.abs(t)/e),r=t,e=(e+1)*(n=0===n&&t<o?1:n);return{value:o<=(r+=(t<o?e:-e)+o)?r:r+1,numWraps:n}},n=256,i=[],p=256;n--;)i[n]=(n+256).toString(16).substring(1);var c,u=function(){return function(o){o.prototype.id=function(t){return void 0===o.prototype._id&&(o.prototype._id=function(t){var o=0,t=t||11;if(!e||2*p<n+t)for(e="",n=0;o<p;o++)e+=i[256*Math.random()|0];return e.substring(n,n+++t)}()),t&&(o.prototype._id=t),o.prototype._id}}};(c=w=w||{})[c.A=9]="A",c[c.As=10]="As",c[c.Bb=10]="Bb",c[c.B=11]="B",c[c.Bs=0]="Bs",c[c.Cb=11]="Cb",c[c.C=0]="C",c[c.Cs=1]="Cs",c[c.Db=1]="Db",c[c.D=2]="D",c[c.Ds=3]="Ds",c[c.Eb=3]="Eb",c[c.E=4]="E",c[c.Es=5]="Es",c[c.Fb=4]="Fb",c[c.F=5]="F",c[c.Fs=6]="Fs",c[c.Gb=6]="Gb",c[c.G=7]="G",c[c.Gs=8]="Gs",c[c.Ab=8]="Ab";var a=w,f={a4:440},s=function(t){return f=t?o(o({},f),t):f},y={},v={},d=12,l=12;!function(){for(var t=0,o=0,t=0;t<12;++t)for(o=0;o<l;++o){var e="".concat(t,"-").concat(o),n=d+t*l+o,r=Math.pow(2,(n-69)/12)*s().a4;v[e]=n,y[e]=r}}(),console.log("lookup",y);var h=[1,3,4,6,8,10],b=[1,3,4,6,8,10],w=(A.prototype.id=function(t){return""},A.prototype.octave=function(t){return 0},A.prototype.tone=function(t){return a.C},A.prototype.midiKey=function(){return function(t,o){t="".concat(t,"-").concat(o),o=v[t];if(void 0===o)throw new Error("Invalid midi key: ".concat(t));return o}(this.octave(),this.tone())},A.prototype.frequency=function(){return function(t,o){t="".concat(t,"-").concat(o),o=y[t];if(void 0===o)throw new Error("Invalid frequency key: ".concat(t));return o}(this.octave(),this.tone())},function(t,o,e,n){var r,i=arguments.length,p=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(t,o,e,n);else for(var c=t.length-1;0<=c;c--)(r=t[c])&&(p=(i<3?r(p):3<i?r(o,e,p):r(o,e))||p);return 3<i&&p&&Object.defineProperty(o,e,p),p}([u(),function(e){e.prototype.sharpen=function(){if(!e.prototype.tone)throw new Error("Tone doesn't exist on the object");var t=e.prototype.tone,o=t();t(o+1)},e.prototype.isSharp=function(){if(!e.prototype.tone)throw new Error("Tone doesn't exist on the object");var t=e.prototype.tone();return h.includes(t)}},function(e){e.prototype.flatten=function(){if(!e.prototype.tone)throw new Error("Tone doesn't exist on the object");var t=e.prototype.tone,o=t();t(o-1)},e.prototype.isFlat=function(){if(!e.prototype.tone)throw new Error("Tone doesn't exist on the object");var t=e.prototype.tone();return b.includes(t)}},function(o){o.prototype.octave=function(t){return void 0===o.prototype._octave&&(o.prototype._octave=4),void 0!==t&&(o.prototype._octave=r(t,0,12).value),o.prototype._octave}},function(n){n.prototype.tone=function(t){var o,e;return void 0===n.prototype._tone&&(n.prototype._tone=4),void 0!==t&&(o=r(t,0,11),n.prototype._tone=o.value,void 0!==(e=n.prototype.octave)&&(t=e(),e(t+o.numWraps))),n.prototype._tone}}],A));function A(t){var o;this.octave(null!==(o=null==t?void 0:t.octave)&&void 0!==o?o:4),this.tone(null!==(t=null==t?void 0:t.tone)&&void 0!==t?t:4)}(u=_=_||{})[u.NATURAL=0]="NATURAL",u[u.SHARP=1]="SHARP",u[u.FLAT=2]="FLAT";var _=_;t.Modifier=_,t.Note=w,t.Semitone=a,t.wrap=r,Object.defineProperty(t,"__esModule",{value:!0})});
